<div class="hf-section">
  <div class="justify-content-between w-100 d-flex">
    <h2><%= t('sidebar.admin.manage.episodes') %></h2>
    <div class="dropdown">
      <%= link_to('Add episode', '#', id: 'add-episodes', class: 'btn btn-secondary btn-sm dropdown-toggle', "data-toggle": "dropdown", "aria-haspopup": "true", "aria-expanded": "false") %>
      <div class="dropdown-menu  dropdown-menu-right hf-dropdown" aria-labelledby="add-episodes">
        <a class="dropdown-item" href="#">From files...</a>
        <a class="dropdown-item" href="#">Manually...</a>
      </div>
    </div>
  </div>
  <h6 class="text-muted"><%= @show.get_title %></h6>
</div>

<div id="from-files">
  <%= render partial: 'from_files' %>
</div>

<table class="table d-none">
  <thead>
    <tr>
      <th>ID</th>
      <th>Title</th>
      <th>Show</th>
      <th>Duration</th>
      <th>Status</th>
    </tr>
  </thead>
  <tbody>
    <% @episodes.each do |episode| %>
      <% show = episode.show %>
      <tr>
        <td><%= episode.id %></td>
        <td><%= episode.title %></td>
        <% if show.nil? %>
          <td>N/A</td>
          <td>N/A</td>
        <% else %>
          <td><%= link_to(show.get_title, edit_admin_show_path(show)) %></td>
          <td><%= episode.show.average_run_time %></td>
        <% end %>
        <td>
          <% @_rule = {class: nil} %>
          <% @_thumb_info = {} %>
          <% @model = episode %>
          <% @hide_title = true %>
          <%= render '/shows/partial/_thumbs' %>
        </td>
      </tr>
      <% end %>
  </tbody>
</table>

<script type="text/javascript">
  $(document).ready(function() {
    $('tables').DataTable({
      "paging":   false,
      "search":   false,
      "order": [[ 0, "desc" ]]
    });

    function addEpisode(episode) {
      if (!episode) {
        return;
      }
      var id = episode.id;
      var title = episode.title;
      var show = "<%= @show.get_title %>";
      var duration = episode.duration;
    }
  });
</script>
