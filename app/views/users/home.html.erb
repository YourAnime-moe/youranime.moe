<div class="container is-fluid">
  <% if Show.published.empty? %>
    <div class="text-center">
      <div class="vertical-center">
        <div class="wrapper">
          <h4 class="text-muted"><%= t('anime.shows.empty') %></h4>
        </div>
      </div>
    </div>
  <% else %>
    <% if @episodes[:actual].size > 0 %>
      <div class="hf-section" style="margin-bottom: 50px;">
        <div class="tanoshimu-list-title"><%= t('anime.episodes.continue-watching') %></div>
        <%= render 'users/partial/continue' %>
      </div>
    <% end %>

    <div class="hf-section">
      <% if @main_queue.any? %>
        <%= hf_header(t('anime.shows.main-queue'), subtitle: t('anime.shows.main-queue-what'), link_title: t('anime.other.more'), link: my_queue_path) %>
        <div class="columns is-tiny-gap no-margin shows">
          <% @main_queue.each do |show| %>
            <%= link_to(show, class: "column is-3") do %>
              <%= show_thumb(show) %>
            <% end %>
          <% end %>
        </div>
      <% end %>
    </div>

    <div class="hf-section">
      <%= hf_header(t('anime.shows.trending'), subtitle: t('anime.shows.trending-what'), link_title: t('anime.other.more'), link: shows_path) %>
      <div id="trending_shows">
        <%= show_skeleton %>
        <%= show_skeleton %>
      </div>
    </div>

    <% if @recommendations.any? %>
      <div class="hf-section">
        <%= hf_header(t('anime.shows.recommend'), subtitle: t('anime.shows.recommend-what'), link_title: t('anime.other.more'), link: shows_path) %>
        <div class="thumbs-section">
          <% @recommendations.each_slice(4) do |shows_rows| %>
            <div class="columns is-tiny-gap no-margin shows">
              <% shows_rows.each do |show| %>
                <%= link_to(show, class: "column is-3") do %>
                  <%= show_thumb(show, rules: @_rule) %>
                <% end %>
              <% end %>
            </div>
          <% end %>
        </div>
      </div>
    <% end %>

    <div class="hf-section">
      <%= hf_header(t('anime.shows.recent'), subtitle: t('anime.shows.recent-what'), link_title: t('anime.other.more'), link: shows_path) %>
      <div id="recent_shows">
        <%= show_skeleton %>
        <%= show_skeleton %>
      </div>
    </div>
  <% end %>
</div>

<script type="text/javascript">
  document.addEventListener('DOMContentLoaded', function() {
    loadPartial('recent_shows', '/users/recent_shows');
    loadPartial('trending_shows', '/users/trending_shows');
  });
</script>
